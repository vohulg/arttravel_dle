// JavaScript Document
// TWS Gallery - by Al-x
// Version TWS Gallery 5.2
// Powered by http://wonderfullife.ru/
// Support by http://wonderfullife.ru/, http://inker.wonderfullife.ru/
//-----------------------------------------------------
// Copyright (c) 2007,2012 TWS
var twsg_p_cache=new Array();function MenuGalCat(a,c){var b=new Array();if(c&&c!="0"){b[0]='<a href="'+dle_root+"index.php?do=gallery&act=21&subact=1&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+gallery_lang_admin[1]+"</a>";b[1]='<a href="'+dle_root+"index.php?do=gallery&act=21&subact=2&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+gallery_lang_admin[7]+"</a>";b[2]='<a href="'+dle_root+"index.php?do=gallery&act=21&subact=3&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+gallery_lang_admin[5]+"</a>";b[3]='<a href="'+dle_root+"index.php?do=gallery&act=21&subact=4&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+gallery_lang_admin[6]+"</a>";b[4]='<a href="'+dle_root+"index.php?do=gallery&act=19&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+menu_short+"</a>";if(c=="2"){b[5]='<a href="'+dle_root+dle_admin+"?mod=twsgallery&act=2&si="+a+'" target="_blank">'+menu_full+"</a>"}}else{b[0]='<a href="'+dle_root+"index.php?do=gallery&act=24&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+menu_short+"</a>"}if(!c||c=="0"||c=="2"){b[b.length]="<a onclick=\"DLEconfirm('"+gallery_lang_user[2]+"', '"+dle_confirm+"', function (){ document.location='"+dle_root+"index.php?do=gallery&act=27&dle_allow_hash="+dle_login_hash+"&si="+a+'\'; } ); return false;" href="#">'+gallery_lang_user[0]+"</a>"}return b}function ShortGalFoto(a,f,c,d,b){var e=new Array();if(c=="1"){e[0]='<a href="'+dle_root+"index.php?do=gallery&act=17&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+menu_short+"</a>"}if(f!="0"){if(f=="2"){e[e.length]='<a href="'+dle_root+dle_admin+"?mod=twsgallery&act=24&si="+a+'" target="_blank">'+menu_full+"</a>"}e[e.length]='<a onclick="tws_file_actions(1, '+a+", "+b+'); return false;" href="#">'+gallery_lang_admin[2]+"</a>";e[e.length]='<a onclick="tws_file_actions(2, '+a+", "+b+'); return false;" href="#">'+gallery_lang_admin[5]+"</a>";e[e.length]='<a onclick="tws_file_actions(3, '+a+", "+b+'); return false;" href="#">'+gallery_lang_admin[6]+"</a>";if(b=="0"){e[e.length]='<a onclick="tws_file_actions(4, '+a+", "+b+'); return false;" href="#">'+gallery_lang_admin[4]+"</a>"}e[e.length]='<a href="'+dle_root+"index.php?do=gallery&act=7&dle_allow_hash="+dle_login_hash+"&si="+a+'">'+gallery_lang_admin[3]+"</a>"}if(d=="1"){e[e.length]='<a onclick="tws_file_actions(5, '+a+", "+b+'); return false;" href="#">'+gallery_lang_user[0]+"</a>"}return e}function twsg_ajax_comm_edit(b){for(var a=0,c=c_cache.length;a<c;a++){if(a in c_cache){if(c_cache[a]!=""){ajax_cancel_comm_edit(a)}}}if(!twsg_p_cache[b]||twsg_p_cache[b]==""){twsg_p_cache[b]=$("#comm-id-"+b).html()}ShowLoading("");$.get(dle_root+"engine/gallery/ajax/comments.php",{com_id:b,dle_allow_hash:dle_login_hash,action:"edit",skin:dle_skin},function(d){HideLoading("");RunAjaxJS("comm-id-"+b,d);setTimeout(function(){$("html:not(:animated)"+(!$.browser.opera?",body:not(:animated)":"")).animate({scrollTop:$("#comm-id-"+b).position().top-70},700)},100)});return false}function uncom_ajax_cancel_comm_edit(a){if(twsg_p_cache[a]!=""){$("#comm-id-"+a).html(twsg_p_cache[a]);twsg_p_cache[a]=""}return false}function uncom_ajax_save_comm_edit(a){if(gallery_dle_id>95&&(dle_wysiwyg=="yes"||dle_wysiwyg=="1")){submit_all_data()}if(gallery_dle_id>95||dle_wysiwyg!="yes"){var b=$("#dleeditcomments"+a).val()}else{var b=$("#dleeditcomments"+a).html()}ShowLoading("");$.post(dle_root+"engine/gallery/ajax/comments.php",{com_id:a,comm_txt:b,dle_allow_hash:dle_login_hash,action:"do_edit",skin:dle_skin},function(c){HideLoading("");twsg_p_cache[a]="";$("#comm-id-"+a).html(c)});return false}function DeleteComment(a){DLEconfirm(dle_del_agree,dle_confirm,function(){ShowLoading("");$.get(dle_root+"engine/gallery/ajax/comments.php",{com_id:a,dle_allow_hash:dle_login_hash,action:"delete",skin:dle_skin},function(b){HideLoading("");$("html"+(!$.browser.opera?",body":"")).animate({scrollTop:$("#comment-"+a).position().top-70},700);setTimeout(function(){$("#comment-"+a).hide("blind",{},1400)},700)})})}function tws_file_actions(e,i,g){var f="",d=0,h=function(){ShowLoading("");$.post(dle_root+"engine/gallery/ajax/editfile.php",{si:i,send_notice_text:f,re:gallery_mode,send_notice:d,skin:dle_skin,act:e,dle_allow_hash:dle_login_hash},function(b){HideLoading("");b=cas(b,1,3);if(b&&e==5){document.location=b}})};if(g!="0"){if(e==5){DLEconfirm(gallery_lang_user[2],dle_confirm,h)}else{h()}return}var c=function(){var j={};j[dle_act_lang[3]]=function(){$(this).dialog("close")};j[gallery_lang_admin[11]]=function(){if((e==4||e==5)&&$("#dle-promt-text").val().length<1){$("#dle-promt-text").addClass("ui-state-error")}else{f=$("#dle-promt-text").val();d=1;h();$(this).dialog("close");$("#dlepopup").remove()}};$("#dlepopup").remove();var b=e==4?"":gallery_lang_admin[8];$("body").append("<div id='dlepopup' title='"+gallery_lang_admin[4]+"' style='display:none'><br />"+gallery_lang_admin[10]+"<br /><br /><textarea name='dle-promt-text' id='dle-promt-text' class='ui-widget-content ui-corner-all' style='width:97%;height:100px; padding: .4em;'>"+b+"</textarea></div>");$("#dlepopup").dialog({autoOpen:true,width:500,dialogClass:"modalfixed",buttons:j});$(".modalfixed.ui-dialog").css({position:"fixed"});$("#dlepopup").dialog("option","position",["0","0"])};if(e==4){c();return}var a={};a[dle_act_lang[1]]=function(){$(this).dialog("close")};if(g=="0"){a[gallery_lang_admin[4]]=function(){$(this).dialog("close");c()}}a[dle_act_lang[0]]=h;$("#dlepopup").remove();$("body").append("<div id='dlepopup' title='"+dle_confirm+"' style='display:none'><br /><div id='dlepopupmessage'>"+gallery_lang_user[2]+(g=="0"?" "+gallery_lang_admin[9]:"")+"</div></div>");$("#dlepopup").dialog({autoOpen:true,width:500,dialogClass:"modalfixed",buttons:a});$(".modalfixed.ui-dialog").css({position:"fixed"});$("#dlepopup").dialog("option","position",["0","0"])};